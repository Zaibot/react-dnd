(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{148:function(e,t,n){"use strict";var r=n(619);n.o(r,"emptyBounds")&&n.d(t,"emptyBounds",function(){return r.emptyBounds}),n.o(r,"isPositionSame")&&n.d(t,"isPositionSame",function(){return r.isPositionSame});var i=n(618);n.o(i,"emptyBounds")&&n.d(t,"emptyBounds",function(){return i.emptyBounds}),n.o(i,"isPositionSame")&&n.d(t,"isPositionSame",function(){return i.isPositionSame});var o=n(617);n.d(t,"emptyBounds",function(){return o.a});var a=n(616);n.d(t,"isPositionSame",function(){return a.a});n(615)},237:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(0);const{Consumer:i,Provider:o}=r.createContext({reportRefContainer(){console.warn("[@zaibot/react-dnd] missing PositionContainer")},getPosition:()=>(console.warn("[@zaibot/react-dnd] missing PositionContainer"),null),getPositions:()=>(console.warn("[@zaibot/react-dnd] missing PositionContainer"),[])})},239:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i=n.n(r);class o extends i.a.Component{render(){const{dragHandleProps:e,children:t}=this.props;return i.a.createElement("div",Object.assign({style:{display:"inline"}},e),t)}}},240:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var r=n(0),i=n.n(r),o=n(98),a=n(148);let s;const g=Object(o.b)(class extends i.a.Component{constructor(e,t){super(e,t),this.state={isDragging:!1,element:null,offsetWithinElement:null,offsetWithinViewport:null},this.getBounds=this.getBounds.bind(this),this.onRefTracking=this.onRefTracking.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this)}render(){return this.renderStatic()}renderStatic(){const{isDragging:e}=this.state,t=this.getBounds(),n=this.state.offsetWithinElement,r={draggable:!0,onDragStart:this.onDragStart,onDrag:this.onDrag,onDragEnd:this.onDragEnd},i={ref:this.onRefTracking},o=e?this.renderDragging():null;return this.props.children({dragHandleProps:r,dragContainerProps:{},trackingProps:i,isDragging:e,isDragged:!1,dragging:o,bounds:t,touchPosition:n})}renderDragging(){const{offsetWithinViewport:e}=this.state,t=this.getBounds();if(!t)return void console.warn("[@zaibot/react-dnd] missing static bounds");if(!e)return void console.warn("[@zaibot/react-dnd] missing dragging offsets");const n=this.state.offsetWithinElement,r={style:{pointerEvents:"none",transform:`translate(${e.left}px, ${e.top}px)`,position:"fixed",boxSizing:"border-box",top:"0",left:"0",width:`${t.width}px`,height:`${t.height}px`,zIndex:999999}};return this.props.children({dragHandleProps:{},dragContainerProps:r,trackingProps:{},isDragging:!0,isDragged:!0,dragging:null,bounds:t,touchPosition:n})}onRefTracking(e){this.state.element!==e&&(this.setState({element:e}),this.props.refTracking&&this.props.refTracking(e))}getBounds(){return this.state.element?this.state.element.getBoundingClientRect():null}onDragStart(t){const n=this.getBounds();if(!n)return void console.warn("[@zaibot/react-dnd] missing static bounds");t.dataTransfer.setDragImage((s||((s=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),s),0,0),t.dataTransfer.effectAllowed="move";const r={left:t.clientX-n.left,top:t.clientY-n.top},i={left:t.clientX-r.left,top:t.clientY-r.top};e(()=>{this.setState({isDragging:!0,offsetWithinElement:r,offsetWithinViewport:i}),this.props.onDragging(this.props.dataDrag)}),t.stopPropagation()}onDrag(e){const{offsetWithinElement:t}=this.state;if(!t)return;const n={left:e.clientX-this.state.offsetWithinElement.left,top:e.clientY-this.state.offsetWithinElement.top};Object(a.isPositionSame)(n,this.state.offsetWithinViewport)||this.setState({offsetWithinViewport:n}),e.stopPropagation()}onDragEnd(e){this.setState({isDragging:!1}),this.props.onDragged(),e.stopPropagation()}}),d=e=>{const t=e;return i.a.forwardRef((e,n)=>{const{dataDrag:r,onDragEnd:o,onDragMove:a,onDragStart:s,refTracking:d,...p}=e;return i.a.createElement(g,{dataDrag:r,onDragEnd:o,onDragMove:a,onDragStart:s,refTracking:d},e=>i.a.createElement(t,Object.assign({},e,p,{ref:n})))})};try{(exports.withDraggable||d).displayName="withDraggable",(exports.withDraggable||d).__docgenInfo={description:"",displayName:"withDraggable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/draggable/index.tsx#withDraggable"]={name:"withDraggable",docgenInfo:(exports.withDraggable||d).__docgenInfo,path:"src/draggable/index.tsx"})}catch(e){}}).call(this,n(901).setImmediate)},241:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(98),o=n(148);const a=Object(i.b)(class extends r.Component{constructor(e,t){super(e,t),this.state={droppingData:null,droppingPosition:null},this.dropProps={onDrop:this.onDrop.bind(this),onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this)}}render(){const{droppingData:e,droppingPosition:t}=this.state,n=!!this.state.droppingData,r=this.dropProps,i={ref:this.props.refTracking};return this.props.children({dropProps:r,trackingProps:i,isDropping:n,droppingData:e,droppingPosition:t})}onDragOver(e){const t=this.props.draggingData,n={left:e.clientX,top:e.clientY};this.state.droppingData===t&&Object(o.isPositionSame)(this.state.droppingPosition,n)||(this.setState({droppingData:t,droppingPosition:n}),this.props.onDropping&&this.props.onDropping({droppingPosition:n,droppingData:t})),e.preventDefault()}onDragLeave(e){this.setState({droppingData:null,droppingPosition:null}),e.preventDefault()}onDrop(e){const t=this.props.draggingData,n={left:e.clientX,top:e.clientY};this.setState({droppingData:null,droppingPosition:null}),this.props.onDropped&&this.props.onDropped({droppingPosition:n,droppingData:t}),e.preventDefault()}}),s=e=>{const t=e;return r.forwardRef((e,n)=>{const{onDropped:i,onDropping:o,refTracking:s,...g}=e;return r.createElement(a,{onDropped:i,onDropping:o,refTracking:s},e=>r.createElement(t,Object.assign({},e,g,{ref:n})))})};try{(exports.withDroppable||s).displayName="withDroppable",(exports.withDroppable||s).__docgenInfo={description:"",displayName:"withDroppable",props:{propTypes:{defaultValue:null,description:"",name:"propTypes",required:!0,type:{name:"ValidationMap<Props>"}},contextTypes:{defaultValue:null,description:"",name:"contextTypes",required:!0,type:{name:"ValidationMap<any>"}},defaultProps:{defaultValue:null,description:"",name:"defaultProps",required:!0,type:{name:"Partial<Props>"}},displayName:{defaultValue:null,description:"",name:"displayName",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/droppable/index.tsx#withDroppable"]={name:"withDroppable",docgenInfo:(exports.withDroppable||s).__docgenInfo,path:"src/droppable/index.tsx"})}catch(e){}},615:function(e,t){},616:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=(e,t)=>e===t||e&&t&&e.left===t.left&&e.top===t.top},617:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={left:0,top:0,right:0,bottom:0,width:0,height:0}},618:function(e,t){},619:function(e,t){},631:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const r=(e,t,n,r,i,o)=>{const a=i-n,s=o-r,g=a*a+s*s,d=0!==g?((e-n)*a+(t-r)*s)/g:-1;let p=0,c=0;d<0?(p=n,c=r):d>1?(p=i,c=o):(p=n+d*a,c=r+d*s);const l=e-p,u=t-c;return Math.sqrt(l*l+u*u)},i={vertical:(e,t)=>{const n=t.reduce((t,n)=>{const i=((e,t)=>r(e.left,e.top,t.left,t.top,t.right,t.top))(e,n.bounds);return!t||i<t.distance?{element:n,distance:i,isBefore:!0,isAfter:!1}:t},null);return t.reduce((t,n)=>{const i=((e,t)=>r(e.left,e.top,t.left,t.bottom-1,t.right,t.bottom-1))(e,n.bounds);return!t||i<t.distance?{element:n,distance:i,isBefore:!1,isAfter:!0}:t},n)||null},horizontal:(e,t)=>{const n=t.reduce((t,n)=>{const i=((e,t)=>r(e.left,e.top,t.left,t.top,t.left,t.bottom))(e,n.bounds);return!t||i<t.distance?{element:n,distance:i,isBefore:!0,isAfter:!1}:t},null);return t.reduce((t,n)=>{const i=((e,t)=>r(e.left,e.top,t.right-1,t.top,t.right-1,t.bottom))(e,n.bounds);return!t||i<t.distance?{element:n,distance:i,isBefore:!1,isAfter:!0}:t},n)||null}}},632:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(0),i=n.n(r),o=n(237),a=n(148);class s extends i.a.Component{constructor(e,t){super(e,t),this.onRefContainer=this.onRefContainer.bind(this),this.getBounds=this.getBounds.bind(this)}render(){const{children:e}=this.props;return e({refContainer:this.onRefContainer})}onRefContainer(e){this.__element!==e&&(this.__element=e,this.props.reportRefContainer(this.props.keyData,e?this.getBounds:null),this.props.refContainer&&this.props.refContainer(e))}getBounds(){return this.__element?this.__element.getBoundingClientRect():a.emptyBounds}}const g=({children:e,...t})=>i.a.createElement(o.a,null,({reportRefContainer:n})=>i.a.createElement(s,Object.assign({},t,{reportRefContainer:n}),e)),d=e=>{const t=e;return i.a.forwardRef((e,n)=>{const{refContainer:r,reportRefContainer:o,keyData:a,...s}=e;return i.a.createElement(g,{keyData:a,refContainer:r},e=>i.a.createElement(t,Object.assign({},e,s,{ref:n})))})};try{(exports.PositionPublisher||g).displayName="PositionPublisher",(exports.PositionPublisher||g).__docgenInfo={description:"",displayName:"PositionPublisher",props:{refContainer:{defaultValue:null,description:"",name:"refContainer",required:!1,type:{name:"RefMethod"}},keyData:{defaultValue:null,description:"",name:"keyData",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/position-publisher/index.tsx#PositionPublisher"]={name:"PositionPublisher",docgenInfo:(exports.PositionPublisher||g).__docgenInfo,path:"src/position-publisher/index.tsx"})}catch(e){}try{(exports.withPositionPublisher||d).displayName="withPositionPublisher",(exports.withPositionPublisher||d).__docgenInfo={description:"",displayName:"withPositionPublisher",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/position-publisher/index.tsx#withPositionPublisher"]={name:"withPositionPublisher",docgenInfo:(exports.withPositionPublisher||d).__docgenInfo,path:"src/position-publisher/index.tsx"})}catch(e){}},633:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n.n(r),o=n(237);class a extends i.a.Component{constructor(e,t){super(e,t),this.__registries=[],this.state={registries:this.__registries,element:null},this.reportRefContainer=this.reportRefContainer.bind(this),this.getPositions=this.getPositions.bind(this),this.getPosition=this.getPosition.bind(this),this.onContainerRef=this.onContainerRef.bind(this),this.getBounds=this.getBounds.bind(this)}render(){const e=this.getBounds,t=this.onContainerRef,n=this.state.registries,r=this.props.children({refContainer:t,getBounds:e,registries:n});return i.a.createElement(o.b,{value:this},r)}reportRefContainer(e,t){if(t){if(this.__registries.find(({key:n,getBounds:r})=>e===n&&t===r))return;const n={key:e,getBounds:t},r=[...this.__registries.filter(t=>t.key!==e),n];this.setState({registries:this.__registries=r})}else{if(!this.__registries.find(({key:t})=>e===t))return;const t=this.__registries.filter(t=>t.key!==e);this.setState({registries:this.__registries=t})}}getPositions(){return this.__registries.map(({key:e,getBounds:t})=>({key:e,bounds:t()}))}getPosition(e){const t=this.__registries.find(({key:t})=>e===t);return t?t.getBounds():null}onContainerRef(e){this.state.element!==e&&this.setState({element:e})}getBounds(){return this.state.element?this.state.element.getBoundingClientRect():null}}const s=e=>{const t=e;return i.a.forwardRef((e,n)=>i.a.createElement(a,null,r=>i.a.createElement(t,Object.assign({},r,e,{ref:n}))))};try{(exports.withPositionContainer||s).displayName="withPositionContainer",(exports.withPositionContainer||s).__docgenInfo={description:"",displayName:"withPositionContainer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/position-container/index.tsx#withPositionContainer"]={name:"withPositionContainer",docgenInfo:(exports.withPositionContainer||s).__docgenInfo,path:"src/position-container/index.tsx"})}catch(e){}},951:function(e,t,n){var r={"./nestedObjectAssign":626,"./nestedObjectAssign.js":626};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=951},954:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),r=n.n(t),i=n(238),o=n(634),a=n(34),s=n(241),g=n(98),d=n(240),p=n(239),c=n(633),l=n(632),u=n(631);const f=({innerRef:e,...t})=>r.a.createElement("div",Object.assign({},t,{ref:e,style:{...t.style,background:"#fcc",display:"inline-block",padding:"2rem"}})),h=({innerRef:e,...t})=>r.a.createElement("div",Object.assign({},t,{ref:e,style:{...t.style,background:"#aaf",display:"inline-block",padding:"2rem",opacity:.75}})),D=({innerRef:e,...t})=>r.a.createElement("div",Object.assign({},t,{ref:e,style:{...t.style,background:"#ffa",display:"inline-block",padding:"2rem"}})),m=[{id:1,text:"Hello"},{id:2,text:"World"},{id:3,text:"!"}];Object(i.storiesOf)("react-dnd",e).addDecorator(Object(o.withInfo)({inline:!0})).add("Basic",()=>r.a.createElement(g.a,null,r.a.createElement(s.a,{onDropped:Object(a.action)("onDropped"),onDropping:void 0},({isDropping:e,dropProps:t,trackingProps:n})=>r.a.createElement(f,Object.assign({},n,t,{innerRef:n.ref}),e?"Dropping!":"Waiting...")),r.a.createElement(d.a,{dataDrag:1,onDragEnd:Object(a.action)("onDragEnd"),onDragMove:void 0,onDragStart:Object(a.action)("onDragStart")},({isDragging:e,isDragged:t,dragContainerProps:n,dragHandleProps:i,trackingProps:{ref:o},dragging:a})=>t?r.a.createElement(h,Object.assign({},n,i,{innerRef:o}),"Being dragged"):e?r.a.createElement(D,Object.assign({},n,i,{innerRef:o}),a,"Dragging me"):r.a.createElement(D,Object.assign({},n,i,{innerRef:o}),a,"Drag me")))).add("Handle",()=>r.a.createElement(g.a,null,r.a.createElement(s.a,{onDropped:Object(a.action)("onDropped"),onDropping:void 0},({isDropping:e,dropProps:t,trackingProps:n})=>r.a.createElement(f,Object.assign({},n,t,{innerRef:n.ref}),e?"Dropping!":"Waiting...")),r.a.createElement(d.a,{dataDrag:1,onDragEnd:Object(a.action)("onDragEnd"),onDragMove:void 0,onDragStart:Object(a.action)("onDragStart")},({isDragging:e,isDragged:t,dragContainerProps:n,dragHandleProps:i,trackingProps:{ref:o},dragging:a})=>t?r.a.createElement(h,Object.assign({},n,{innerRef:o}),r.a.createElement(p.a,{dragHandleProps:i},"Handle")," Being dragged"):e?r.a.createElement(D,Object.assign({},n,{innerRef:o}),a,r.a.createElement(p.a,{dragHandleProps:i},"Handle")," Dragging me"):r.a.createElement(D,Object.assign({},n,{innerRef:o}),a,r.a.createElement(p.a,{dragHandleProps:i},"Handle")," Drag me")))).add("Ordering",()=>r.a.createElement(g.a,null,r.a.createElement(c.a,null,({ref:e,registries:t})=>r.a.createElement(s.a,{onDropped:Object(a.action)("onDropped"),onDropping:void 0,refTracking:e},({isDropping:e,dropProps:n,trackingProps:i,droppingPosition:o})=>r.a.createElement(f,Object.assign({},i,n,{innerRef:i.ref}),m.map(e=>r.a.createElement(l.a,{keyData:e},({refContainer:t})=>r.a.createElement(d.a,{dataDrag:e,onDragEnd:Object(a.action)("onDragEnd"),onDragMove:void 0,onDragStart:Object(a.action)("onDragStart"),refTracking:t},({isDragged:t,dragContainerProps:n,dragHandleProps:i,trackingProps:o,dragging:a})=>t?r.a.createElement(h,Object.assign({},n,i,{innerRef:o.ref}),a,e.text):r.a.createElement(D,Object.assign({},n,i,{innerRef:o.ref}),a,e.text)))),r.a.createElement("ol",null,t.map(({getBounds:e,key:t})=>r.a.createElement("li",null,t.text," (",e().left,":",e().top,", ",e().width,"w",e().height,"h)"))),r.a.createElement("p",{style:{whiteSpace:"pre"}},e?r.a.createElement("span",null,"Dropping: ",(()=>{const e=t.map(({getBounds:e,key:t})=>({bounds:e(),key:t,order:m.indexOf(t)})),n=u.a.horizontal(o,e);return r.a.createElement("span",null,n.isBefore?"Before":"After"," ",n.element.key.text)})()):"Drag something"))))))}.call(this,n(457)(e))},955:function(e,t,n){var r={"./index.tsx":954};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=955},974:function(e,t,n){"use strict";n.r(t),function(e){var t=n(238),r=n(955);Object(t.configure)(function(){r.keys().forEach(function(e){return r(e)})},e)}.call(this,n(457)(e))},976:function(e,t,n){n(555),n(975),e.exports=n(974)},98:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(0);const i=r.createContext({draggingData:null,onDragging(){console.warn("[@zaibot/react-dnd] missing DraggingProvider")},onDragged(){console.warn("[@zaibot/react-dnd] missing DraggingProvider")}});class o extends r.Component{constructor(e,t){super(e,t),this.onDragging=this.onDragging.bind(this),this.onDragged=this.onDragged.bind(this),this.state={draggingData:null,onDragging:this.onDragging,onDragged:this.onDragged}}render(){return r.createElement(i.Provider,{value:this.state},this.props.children)}onDragging(e){this.setState({draggingData:e})}onDragged(){this.setState({draggingData:null})}}const a=e=>r.forwardRef((t,n)=>r.createElement(i.Consumer,null,({draggingData:i,onDragged:o,onDragging:a})=>r.createElement(e,Object.assign({},t,{onDragging:a,onDragged:o,draggingData:i,ref:n}))));try{(exports.DraggingProvider||o).displayName="DraggingProvider",(exports.DraggingProvider||o).__docgenInfo={description:"",displayName:"DraggingProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/dragging-provider/index.tsx#DraggingProvider"]={name:"DraggingProvider",docgenInfo:(exports.DraggingProvider||o).__docgenInfo,path:"src/dragging-provider/index.tsx"})}catch(e){}try{(exports.withDragAndDropData||a).displayName="withDragAndDropData",(exports.withDragAndDropData||a).__docgenInfo={description:"",displayName:"withDragAndDropData",props:{toString:{defaultValue:null,description:"Returns a string representation of a string. \nReturns a string representation of a function.",name:"toString",required:!0,type:{name:"() => string"}},length:{defaultValue:null,description:"Returns the length of a String object.",name:"length",required:!0,type:{name:"number"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object. \nReturns the primitive value of the specified object.",name:"valueOf",required:!0,type:{name:"(() => string) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/dragging-provider/index.tsx#withDragAndDropData"]={name:"withDragAndDropData",docgenInfo:(exports.withDragAndDropData||a).__docgenInfo,path:"src/dragging-provider/index.tsx"})}catch(e){}}},[[976,1,2]]]);
//# sourceMappingURL=preview.8b9b98af0a4c0656cf53.bundle.js.map